// Generated by CoffeeScript 1.4.0
/*
Easy pie chart is a jquery plugin to display simple animated pie charts for only one value

Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.

Built on top of the jQuery library (http://jquery.com)

@source: http://github.com/rendro/easy-pie-chart/
@autor: Robert Fleischmann
@version: 1.1.0

Inspired by: http://dribbble.com/shots/631074-Simple-Pie-Charts-II?list=popular&offset=210
Thanks to Philip Thrasher for the jquery plugin boilerplate for coffee script
*/
(function(b){b.easyPieChart=function(h,p){var f,e,l,q,m,n,r,t,a=this;this.el=h;this.$el=b(h);this.$el.data("easyPieChart",this);this.init=function(){var c,d;a.options=b.extend({},b.easyPieChart.defaultOptions,p);c=parseInt(a.$el.data("percent"),10);a.percentage=0;a.canvas=b("<canvas width='"+a.options.size+"' height='"+a.options.size+"'></canvas>").get(0);a.$el.append(a.canvas);"undefined"!==typeof G_vmlCanvasManager&&null!==G_vmlCanvasManager&&G_vmlCanvasManager.initElement(a.canvas);a.ctx=a.canvas.getContext("2d");
1<window.devicePixelRatio&&(d=window.devicePixelRatio,b(a.canvas).css({width:a.options.size,height:a.options.size}),a.canvas.width*=d,a.canvas.height*=d,a.ctx.scale(d,d));a.ctx.translate(a.options.size/2,a.options.size/2);a.$el.addClass("easyPieChart");a.$el.css({width:a.options.size,height:a.options.size,lineHeight:""+a.options.size+"px"});a.update(c);return a};this.update=function(c){c=parseFloat(c)||0;!1===a.options.animate?l(c):e(a.percentage,c);return a};r=function(){var c,d,b;a.ctx.fillStyle=
a.options.scaleColor;a.ctx.lineWidth=1;b=[];for(c=d=0;24>=d;c=++d)b.push(f(c));return b};f=function(c){var d;d=0===c%6?0:.017*a.options.size;a.ctx.save();a.ctx.rotate(c*Math.PI/12);a.ctx.fillRect(a.options.size/2-d,0,.05*-a.options.size+d,1);a.ctx.restore()};t=function(){var c;c=a.options.size/2-a.options.lineWidth/2;!1!==a.options.scaleColor&&(c-=.08*a.options.size);a.ctx.beginPath();a.ctx.arc(0,0,c,0,2*Math.PI,!0);a.ctx.closePath();a.ctx.strokeStyle=a.options.trackColor;a.ctx.lineWidth=a.options.lineWidth;
a.ctx.stroke()};n=function(){!1!==a.options.scaleColor&&r();!1!==a.options.trackColor&&t()};l=function(c){var d;n();a.ctx.strokeStyle=b.isFunction(a.options.barColor)?a.options.barColor(c):a.options.barColor;a.ctx.lineCap=a.options.lineCap;a.ctx.lineWidth=a.options.lineWidth;d=a.options.size/2-a.options.lineWidth/2;!1!==a.options.scaleColor&&(d-=.08*a.options.size);a.ctx.save();a.ctx.rotate(-Math.PI/2);a.ctx.beginPath();a.ctx.arc(0,0,d,0,2*Math.PI*c/100,!1);a.ctx.stroke();a.ctx.restore()};m=function(){return window.requestAnimationFrame||
window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){return window.setTimeout(a,1E3/60)}}();e=function(c,d){var b,e;a.options.onStart.call(a);a.percentage=d;e=Date.now();b=function(){var g,k;k=Date.now()-e;k<a.options.animate&&m(b);a.ctx.clearRect(-a.options.size/2,-a.options.size/2,a.options.size,a.options.size);n.call(a);g=[q(k,c,d-c,a.options.animate)];a.options.onStep.call(a,g);l.call(a,g);if(k>=a.options.animate)return a.options.onStop.call(a)};m(b)};q=function(a,
b,e,f){var g;g=function(a){return Math.pow(a,2)};return e/2*function(a){return 1>a?g(a):2-g(a/2*-2+2)}(a/(f/2))+b};return this.init()};b.easyPieChart.defaultOptions={barColor:"#ef1e25",trackColor:"#f2f2f2",scaleColor:"#dfe0e0",lineCap:"round",size:110,lineWidth:3,animate:!1,onStart:b.noop,onStop:b.noop,onStep:b.noop};b.fn.easyPieChart=function(h){return b.each(this,function(p,f){var e;e=b(f);if(!e.data("easyPieChart"))return e.data("easyPieChart",new b.easyPieChart(f,h))})}})(jQuery);